---
title: JavaScript 学习笔记（一）问题集合
category: [学习笔记,解决办法]
tag: [JavaScript,前端开发,问题集合]
date: 2017-09-20 11:20:59
---

自从今年三月份末期一直到，大概有半年没有动过博客上面的东西了，一来在公司实习，项目紧，任务重，再加上自己是一个初出茅庐的菜鸟程序员，所以在公司做开发都快忙不过来了，自然也不会有精力和时间更新博客，静下心来学点其他的东西或者巩固一下基础，二来自己也是懒，拖延症晚期患者大概都深有体会，时间总是可以挤出来的，但是就算是好不容易挤出来也都花在了看视频、玩游戏上面了，唉，开局先自我检讨一番……

其实在公司这段时间，虽然没时间学点自己想学的东西，但是收获是真的不小，毕竟一上来就是接触一个已经上线、用户数量将近四十万人的大项目，从最开始看到整个项目文件多到让我一脸懵逼，到后来逐步逐步看懂整个项目的组织结构，改一改样式这样的小操作，到最近独立完成项目规划中一整个功能模块，可以说一路上都在被项目代码碾压过来碾压过去，<!--more-->

### 宽度问题

我个人一直比较喜欢流体布局，这样布局的页面在几乎所有大小的浏览器中都能得到很好的展示效果，使用流体布局，宽度是一个很重要的属性，我推荐从根元素开始，就为元素设置上`width: 100%`属性，以后每一个子元素都为其设置好适当的宽度属性，当然最好也能用百分比来确定。

### 宽度高度的百分比设定

设置元素的宽度高度时，若使用百分比设定，则一定要注意其父元素是否已经明确设置了宽度高度属性，因为使用百分比形式设置子元素宽度高度时，需要依赖对应的父元素来计算出子元素的具体宽度高度，这里所说的父元素明确设置宽度高度属性是指父元素设置了 100px、100em 这样的带有单位的确定数值或者同样宽度高度同样设置为百分比的形式，若父元素的宽度高度值为带有单位的确定数值，则根据百分比直接计算出子元素的宽度高度，如果父元素的宽度高度同样是百分比形式，那么就会继续向上寻找祖元素，查看祖元素的宽度高度值，然后根据同样的规则，计算出父元素的宽度高度，再计算出子元素的宽度高度。

### 按钮处于 focus 状态时边框高亮

在浏览器中点击按钮、输入框甚至 a 标签时，经常会看到这些元素的边框出现高亮状态，提醒用户页面当前焦点处于此处，但有时候我们不想要这种状态，一种办法是使用 JS 触发元素的`blur`事件，使元素失去焦点，这种办法不推荐；另外一种办法是设置元素的 CSS 属性`outline: none`，`outline`属性一般用于设置元素的外线条轮廓，设置为`none`则表示不显示，从而避免出现边框高亮效果。

### 上下元素高度确定，中间元素撑满剩余页面

我第一次实现这个效果时，期望使用`height: 100% `来实现，但很明显这样做是不成功的，百分比形式的高度是根据其父元素的高度计算出来的，如果设置成 100%，则其含义不是元素的高度为当前父元素剩余的高度，而是元素的高度等于父元素的高度。第一种实现方法是设置元素的定位属性为绝对定位`position: absolute`，然后设置元素的`top`属性为上面元素的高度，`bottom`属性为下面元素的高度，这样该元素就可以撑满父元素的剩余部分了，我比较倾向于使用这种方法；第二种实现方法是通过 CSS3 的一些新增属性来实现，例如使用`height: calc(100% -100 px - 100px)`来动态地计算出整个页面除了上下两个高度为 100px 的元素之外剩余部分的高度，或者使用`height: 100%; box-sizing: border-box; padding: 100px 0`来填满父元素的剩余部分。

### 设置定位属性为 fixed 或 absolute 时的兼容性

当为元素设置定位属性为`fixed`或`absolute`时，最好水平属性和垂直属性各自设置一个，因为有部分浏览器的默认定位值不是 0，例如 Safari 在渲染定位属性为`fixed`的元素时，如果不显式地设置`left: 0`，则默认的值不是 0，这样在页面上可能就找不到该元素了。

### 设置 padding 属性时元素实际尺寸发生变化

有部分元素，在设置其`padding`属性时，其实际尺寸会发生变化，比如原来元素的宽度为 100px，`padding-left`为 0，则此时元素的实际宽度就是 100px，之后设置元素的`padding-left`属性为 10px，这时元素的实际宽度会变成 110px。这是我们不想要的，但浏览器这样做是正确的，因为一般`width`指的是元素内容区域的宽度，增加`padding`不会影响到元素内容区域的尺寸，也就是不会影响`width`，但是会影响元素的总尺寸，而总尺寸是会影响元素在父元素中的存在方式的，上面所说的这个例子就属于这种情况，所以当设置元素的`width`为 100px 以后，再设置元素的`padding-left`为 10px，就会造成元素的总尺寸变为 110px。如果我们不希望这种情况出现，比较简单的方法是设置元素的宽度为 90px，也就是原来的宽度减去`padding`的大小，这样总尺寸就不会变化，但如果元素的宽度属性为百分比形式，这种方法就不能奏效了，应对这种情况的办法是设置元素的 CSS3 属性`box-sizing: border-box`，它的作用是改变元素盒模型的尺寸计算方法，如果设置为`border-box`，则表示元素的`width`为`padding`+`content`，这样元素的`padding`就会被计算进元素宽度中，宽度设置好了以后，内容尺寸会随着`padding`的大小而自适应地发生改变，而元素的宽度也就不会因为`padding`的设置而发生变化了。

### 设置 textarea 元素不可拖拽

很简单，设置元素的 CSS 属性`resize: none`即可。

### 设置背景图片的位置

很简单，直接设置 CSS 属性`background-position`即可，其可以设置两个值，第一个是左边距，第二个是上边距。

### 设置图片铺满元素，且保持纵横比

这个要求在显示图片的时候经常会遇到，解决方法是我自己实践出来的，可能不是最好的方法。

``` CSS
background-size: cover;
background-position: center;
background-repeat: no-repeat;
background-image: url('images/xxx.png');
```

其中，`background-size: cover;`用于实现将图片铺满整个元素，`background-position: center;`用于控制图片的中心与元素的中心重合，`background-repeat: no-repeat;`用于控制图片不重复，其实最重要的是前两个属性，第三个属性可有可无。

### 设置鼠标样式

如果你希望鼠标指向某一个元素的时候，鼠标的样式发生变化，可以通过设置`cursor`属性来实现，比较常用的值是`pointer`，此时鼠标的样式为指向超链接时的模样。

### 设置文字修饰

很简单，直接设置 CSS 属性`text-decoration`即可，比较常用的值是`none`，此时文字上没有上划线、下划线等文字修饰，比较适合于 a 标签用作按钮时使用。

### 文字换行

关于文字换行，其实主要的还是在处理西文文字的时候需要考虑的时候，一个很长很长的单词因为浏览器默认的不换行的原因，会导致元素内容冲出元素边界，这在很多时候都不是我们想要的；当然，在处理中文的时候，浏览器虽然会自动换行，但有时候我们并不希望出现换行效果，例如在实现元素尾部多余文字自动变为省略号的时候，就要使文字没有换行效果。

控制文字换行的属性有两个，一个是`word-break`，还一个是`word-wrap`。其中，`word-break`有两个属性值，一个是`break-all`，它代表浏览器在必要的时候可以在单词内部换行，也就是可以强行把单词截断，后半部分另起一行显示，还有一个属性值是`keep-all`，它只允许浏览器在碰到空格或半角字符（中文的标点符号一般都是半角的，注意是**一般是**）的时候换行，如果你不想发生任何意外，那就设置`word-break: break-all`更保险一些。

至于`word-wrap`，他有一个属性值（其实有两个，`normal`是浏览器默认的）`break-word`，它的作用比`word-break`属性值`keep-all`强一些，比`break-all`弱一些，`keep-all`强一些是指它不仅会在碰到空格或全角字符的时候会产生换行效果，而且还会在其他一些情况下产生换行效果，例如中英文混排的时候，`keep-all`就不会产生换行效果，而`break-word`则会在中英文交界的地方产生换行效果，比`break-all`弱一些是指它会尽量使英文的换行看起来更加自然一些，而`break-all`则会很“粗暴”地直接将英文截断，所以在实际使用中使用`word-wrap: break-word`看起来应该会更好一点。

除了上面两种 CSS 属性控制文字在什么情况下产生换行效果，还有一个 CSS 属性对文字换行也具有影响作用，它就是`white-space`，它原本的设计目的是控制浏览器如何处理文字中的空白，但它的`nowrap`属性值却可以控制文本不产生换行效果，所以在这里一并将其归入文字换行的范畴。

属性值`normal`是浏览器默认的，它的效果是合并空白和换行符为一个空白，在没有其他文字换行属性被设置的情况下按照浏览器默认的方式正常换行。

`pre`非常适合显示代码类字符，它的效果是保留所有的空白和换行符，因此带有大量缩进和换行的代码类字符在这个属性的控制之下可以很好的（高保真，哈哈）显示在页面上。

`pre-wrap`将会保留所有的空白和换行符，也就是说它控制文字不仅在换行符处换行，而且同时按照浏览器默认的方式正常换行，比如一段很长的文字，在`pre`属性的控制之下就不会产生换行效果，在`pre-wrap`属性的控制之下就会按照浏览器默认的方式正常换行。

`pre-line`将会合并所有的空白为一个空白，保留所有的换行符，同时按照浏览器默认的方式正常换行，它与`pre-wrap`唯一的不同就是它会合并所有的空白，而`pre-wrap`是会保留所有的空白的。

`nowrap`是个大杀器，它终结一切换行效果，它会合并所有的空白和换行符为一个空白，即使设置了`word-break: break-all`或者其他换行设置，它只有一个弱点，就是在碰到`<br />`标签的时候才会产生换行效果，这样做算是给程序员留了一个后门吧，毕竟凡事不能做得太绝……


